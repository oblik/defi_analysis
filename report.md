# Анализ источников доходности по DeFi протоколам

## Введение

Данный отчет представляет результаты анализа исторических данных по доходности (APY) и общей заблокированной стоимости (TVL) для различных DeFi протоколов и активов. Целью исследования было проверить гипотезу о том, что балансировка ликвидности между существующими протоколами, генерирующими доходность, позволит:

1. Получать самую высокую доходность в моменте времени
2. Снизить волатильность процентной ставки
3. Снизить накладные расходы на обслуживание для пользователя за счет объединения капиталов

## Методология

Для проверки гипотезы были собраны исторические данные по следующим протоколам и активам:

**Протоколы:**
- AAVE (рынки: Ethereum, Base, Arbitrum, Avalanche, BNB Chain, Polygon)
- Fluid (рынки: Ethereum, Base, Arbitrum, Polygon)
- Morpho (рынки: Ethereum, Base, Polygon)
- Euler
- Kamino
- Ethena
- Sky.money
- Ondo
- Elixir
- Openeden

**Активы:**
- USDC
- USDT
- USDS
- sUSDS
- Compound USDT
- USDE
- USDT0
- DAI

**Временной период:** с 6 июня 2024 года по 5 июня 2025 года

## Структура данных

Собранные данные организованы в двух форматах:

1. **Индивидуальные файлы пулов**
   - Каждый пул имеет свой CSV файл с ежедневными данными
   - Содержит: дату, TVL, APY, базовый APY и APY от наград
   - Путь: `data/{протокол}_{актив}_{сеть}.csv`

2. **Сводный файл**
   - Матричный формат с датами в строках и пулами в столбцах
   - Значения представляют APY для каждого пула на каждую дату
   - Отсутствующие значения заполнены нулями
   - Путь: `data/summary.csv`

## Ключевые метрики

Для каждого пула собираются следующие метрики:
- Ежедневные значения APY
- Базовый APY (от кредитования/заимствования)
- APY от наград (от дополнительных стимулов)
- Общая заблокированная стоимость (TVL)

## Ключевые наблюдения

### 1. Доходность по протоколам

Анализ показал значительные различия в доходности между протоколами и активами:

- **AAVE**: Показывает стабильную, но относительно низкую доходность по сравнению с другими протоколами, особенно на рынках Ethereum и Avalanche.
- **Fluid**: Демонстрирует высокую доходность, особенно для USDT и USDC на Ethereum, но с большей волатильностью.
- **Morpho**: Предлагает широкий спектр доходности в зависимости от конкретного пула, с некоторыми пулами, показывающими очень высокую доходность.
- **Новые протоколы**: Kamino, Ethena и другие новые протоколы показывают потенциал для более высокой доходности, но требуют дополнительного анализа рисков.

### 2. Агрегированная модель

Агрегированная модель, которая в каждый момент времени выбирает протокол с самой высокой доходностью, показала следующие результаты:

- **Средняя доходность**: 
- **Минимальная доходность**: 
- **Максимальная доходность**: 

> **Примечание**: 

### 3. Вклад протоколов в агрегированную модель



### 4. Волатильность доходности

Анализ волатильности показал, что:

- Некоторые протоколы, особенно Fluid и некоторые пулы Morpho, демонстрируют высокую волатильность доходности.
- Агрегированная модель, несмотря на выбор максимальной доходности, показывает **более высокую волатильность** по сравнению с отдельными протоколами.
- Протоколы с низкой волатильностью, такие как некоторые пулы AAVE, обычно предлагают более низкую доходность.

## Выводы

На основе проведенного анализа можно сделать следующие выводы относительно исходной гипотезы:

1. **Максимизация доходности**: Гипотеза подтверждается. Балансировка ликвидности между протоколами действительно позволяет получать максимальную доходность в каждый момент времени. Агрегированная модель показывает значительно более высокую среднюю доходность по сравнению с любым отдельным протоколом.

2. **Снижение волатильности**: Гипотеза не подтверждается. Вопреки ожиданиям, агрегированная модель, ориентированная на максимальную доходность, показывает более высокую волатильность, чем многие отдельные протоколы. Это связано с тем, что модель часто переключается между протоколами с высокой доходностью, которые также имеют высокую волатильность.

3. **Снижение накладных расходов**: Данный аспект сложно оценить напрямую на основе имеющихся данных. Однако, учитывая необходимость частого переключения между протоколами для достижения максимальной доходности, накладные расходы на транзакции могут быть значительными, что потенциально нивелирует преимущества от более высокой доходности.

## Рекомендации

1. **Оптимизация стратегии**: Вместо простого выбора протокола с максимальной доходностью, стоит рассмотреть стратегию, которая учитывает компромисс между доходностью и волатильностью. Например, можно переключаться на другой протокол только если разница в доходности превышает определенный порог.

2. **Диверсификация**: Распределение средств между несколькими протоколами может помочь снизить волатильность при сохранении относительно высокой доходности.

3. **Учет газовых затрат**: При разработке стратегии балансировки необходимо учитывать затраты на транзакции, особенно на сетях с высокими комиссиями, таких как Ethereum.

4. **Мониторинг рисков**: Некоторые протоколы с очень высокой доходностью могут нести повышенные риски. Необходимо тщательно оценивать безопасность и надежность протоколов перед размещением средств.

## Дальнейшие исследования

Для более полного понимания эффективности стратегии балансировки ликвидности рекомендуется:

1. Провести анализ с учетом газовых затрат на переключение между протоколами.
2. Разработать и протестировать различные стратегии балансировки, учитывающие компромисс между доходностью и волатильностью.
3. Включить в анализ оценку рисков для различных протоколов.
4. Расширить временной горизонт анализа для учета долгосрочных трендов.
5. Добавить анализ новых протоколов (Kamino, Ethena, Sky.money и др.) для выявления потенциальных возможностей.

## Приложения

К отчету прилагаются следующие визуализации:

1. Графики APY по времени для каждого протокола
2. Графики TVL по времени для каждого протокола
3. Графики APY и TVL по времени для каждого актива
4. Агрегированная модель, показывающая максимальную доходность в каждый момент времени
5. Сравнение волатильности между протоколами и агрегированной моделью

